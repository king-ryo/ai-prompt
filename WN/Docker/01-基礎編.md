# 1. 基礎編：Dockerに触れてみよう（目安：2時間）

このセクションのゴールは、**「自分のPC上でコンテナを起動し、Webサーバを表示させること」**です。難しい理論は後回しにして、まずは動く楽しさを体験しましょう。

---

## 1-1. Dockerの基礎概念（30分）

### **1. Dockerとは？**

Docker（ドッカー）を一言でいうと、**「データやプログラムを隔離された箱（コンテナ）に入れて、どこでも同じように動かせる仕組み」**です。

* **コンテナ（Container）：** アプリケーションとその実行に必要なもの（ライブラリや設定ファイルなど）を一つにまとめた「箱」のことです。

### **2. なぜDockerが必要なのか？（3つの実行環境の比較）**

なぜこれまでのやり方ではダメで、Dockerが使われるようになったのでしょうか？「3つの実行スタイル」を比較するとよく分かります。

#### **① ホストOS直接実行（従来の方法）**

自分のPC（WindowsやMac）に直接インストーラを使ってソフトを入れる方法です。

* **メリット：** PCの性能をフルに使える。
* **デメリット：**
* **環境が汚れる：** 色々なソフトを入れたり消したりするとゴミが残り、PCが不調になる。
* **環境の衝突：** 「アプリAはPython 3が必要」「アプリBはPython 2が必要」といった場合、共存させるのが大変（依存関係地獄）。



#### **② 仮想マシン（VM）**

PCの中に「別のPC（ゲストOS）」を丸ごと作る方法です（VirtualBoxなど）。

* **メリット：** 環境を完全に分けられるので安全。
* **デメリット：**
* **重い・遅い：** OSを丸ごと動かすため、起動に数分かかり、メモリやCPUを大量に消費する。



#### **③ コンテナ（Docker）**

OSの機能（カーネル）は自分のPCと共有し、アプリ部分だけを隔離する方法です。

* **メリット：** **①と②の「いいとこ取り」**です。
* **軽い・速い：** 起動は秒単位。
* **隔離されている：** 環境が汚れない。



**【まとめ：3つの比較表】**

| 項目 | ①ホストOS直接実行 | ②仮想マシン (VM) | ③コンテナ (Docker) |
| --- | --- | --- | --- |
| **仕組み** | PCに直接入れる | PCの中に「別のPC」を作る | PCの中に「隔離された箱」を作る |
| **起動速度** | 最速 | 遅い（数分） | **速い（数秒）** |
| **環境隔離** | × できない（混ざる） | ◎ 完全隔離 | **○ プロセス隔離** |
| **マシン負荷** | 軽い | 重い | **軽い** |

### **3. Dockerを使う目的**

1. **「環境の差異」をなくす（Works on my machine問題の解決）**
* 「開発者のPCでは動くのに、本番環境では動かない！」というトラブルを防げます。


2. **IaC（Infrastructure as Code）の第一歩**
* 「どういうサーバを作るか」を手順書（Excelなど）ではなく、コード（Dockerfile）で管理できます。



---

## 1-2. 環境構築（45分）

実際にDockerをインストールしましょう。

### **1. Docker Desktopのインストール**

お使いのOSに合わせて、公式サイトからインストーラをダウンロード・実行してください。

* **公式サイト:** [Docker Desktopのダウンロード](https://www.docker.com/products/docker-desktop/)
* **Windowsの方:** "Docker Desktop for Windows"（推奨設定のままインストール）。
* **Macの方:** "Docker Desktop for Mac"（※M1/M2チップ搭載機は "Apple Chip" 版を選択）。
* **Linuxの方:** Docker Desktop、またはサーバ向けの "Docker Engine" をインストール。

### **2. 動作確認**

インストール完了後、Docker Desktopを起動します（クジラのアイコンが表示されます）。
その後、ターミナル（WindowsならPowerShell、Macならターミナル）を開き、以下のコマンドを入力します。

```bash
docker --version

```

**成功時の表示例:**
`Docker version 24.0.x, build ...` のようにバージョン番号が表示されれば準備完了です。

---

## 1-3. 基本コマンドとライフサイクル（45分）

ここからは実際にコマンドを打っていきます。

### **Step 1: Hello World（最初のコンテナ起動）**

まずは、Dockerが正しく動くかを確認するための最小のコンテナを動かします。

**実行コマンド:**

```bash
docker run hello-world

```

**何が起きたのか？**

1. PC内に `hello-world` というイメージ（金型）があるか探す。
2. なければインターネット（Docker Hub）からダウンロードする。
3. コンテナ（実体）を作成して起動する。
4. メッセージを表示して、コンテナは自動的に終了する。

**確認:**
画面に `Hello from Docker!` というメッセージが表示されれば成功です。

---

### **Step 2: Webサーバ起動（Nginx）**

次は、実際にWebサーバ（Nginx）を立ち上げてブラウザからアクセスしてみます。

**実行コマンド:**

```bash
docker run -d -p 8080:80 nginx

```

**コマンドの解説:**

* `run`: コンテナを作成して起動せよ。
* `-d`: バックグラウンドで実行せよ（これがないとターミナルが占有されます）。
* `-p 8080:80`: **「自分のPCの8080番ポート」**を**「コンテナの80番ポート」**に繋げよ。
* `nginx`: `nginx` という名前のイメージを使え。

**確認:**
Webブラウザを開き、以下のURLにアクセスしてください。
👉 **http://localhost:8080**

「Welcome to nginx!」という画面が表示されましたか？
これで、あなたのPCの中にWebサーバが一瞬で立ち上がりました。

---

### **Step 3: コンテナの操作と削除**

立ち上げたコンテナを管理する方法を学びます。

**1. 起動中のコンテナを確認する**

```bash
docker ps

```

* `CONTAINER ID`: コンテナのID（ランダムな英数字）。
* `STATUS`: 稼働状況（Up ... となっていれば起動中）。

**2. コンテナを停止する**
先ほど確認した `CONTAINER ID` の先頭3〜4文字を使って停止します。

```bash
docker stop [コンテナID]
# 例: docker stop a1b2

```

再度 `docker ps` を実行すると、一覧から消えているはずです。

**3. コンテナを削除する（お掃除）**
停止しただけではコンテナの実体は残っています（ゴミ箱に入った状態）。完全に消去します。
（停止中も含めて見るには `docker ps -a` を使います）

```bash
docker rm [コンテナID]

```

**4. イメージの確認と削除**
コンテナを消しても、ダウンロードした「イメージ（金型）」はPCに残っています。

```bash
# イメージ一覧の確認
docker images

# イメージの削除（hello-worldを消してみる）
docker rmi hello-world

```

---

### **基礎編まとめ**

これで、「イメージをダウンロード」→「コンテナを起動（run）」→「停止・削除（stop/rm）」というDockerの基本サイクルを一通り体験しました。